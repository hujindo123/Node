<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>
    <title></title>
    <link rel="stylesheet" href="http://static.runoob.com/assets/foundation-5.5.3/foundation.min.css">
    <link rel='stylesheet' href='/stylesheets/music/init.css' />
    <link rel='stylesheet' href='/stylesheets/music/index.css' />
    <link rel='stylesheet' href='/stylesheets/music/swiper.min.css' />
    <style>

        iframe{
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 1000;
            top: 0;
            left: 0;
            border: 0;
            display: none;
        }
        .show{
            display: block;
        }
        .hide{
            display: none;
        }
        .tablist li{
            height: 60px;
            padding: 5px 30px;
            text-align: left;
            border-bottom: 1px solid #eaeff1;
            line-height: 15px;
        }
        .tablist li a{
            display: block;
        }
        .tablist li span{
            font-size: 12px;
        }
        .headTo .searchs {
            background:  #fff;
            background-size: 1.3rem;
            height: 30px;
            border-radius: 5px;
            padding-left: 1em;
            padding-right: 0.5em;
        }
        .headTo .isearchs {
            background:  url(images/icon/searchs.png) 1em center no-repeat;
            background-size: 1.3rem;
            height: 30px;
            border-radius: 5px;
            padding: 0em;
        }


    </style>
    <!-- jQuery 库 -->
    <script src="http://static.runoob.com/assets/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>

    <script src="/javascripts/music/swiper.min.js"></script>
    <script src="/javascripts/music/idangerous.swiper.min.js"></script>
</head>
<!-- jQuery 库 -->
<body  ng-app="song">
<div class="container"  ng-controller="song">
    <header>
        <section class="row headTo">
            <section class="small-2 columns music"></section>
            <section class="small-10 columns searchs">
                <input type="search" placeholder="搜索音乐、歌词、电台" ng-model="searchName" >
            </section>
            <section class="small-2 columns isearchs" ng-click="searchSongId()"></section>
        </section>
    </header>
    <section class="container">
        <section class="row">
            <ul class="tab">
                <li class="small-3 columns active"><a href="javascript:void(0)">歌曲</a></li>
                <li class="small-3 columns"><a href="javascript:void(0)">歌手</a></li>
                <li class="small-3 columns"><a href="javascript:void(0)">MV</a></li>
                <li class="small-3 columns"><a href="javascript:void(0)">主播电台</a></li>
            </ul>
        </section>
    </section>
    <!-- slideTo tab -->
    <div class="swiper-container favor-list" ng-class="{hide: playHide}">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="banner-container">
                    <div class="swiper-wrapper" >
                        <div class="swiper-slide">
                            <div class="title">
                                <a href=""><img src="/images/1.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="title">
                                <a href=""><img src="/images/2.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="title">
                                <a href=""><img src="/images/3.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="title">
                                <a href=""><img src="/images/4.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="title">
                                <a href=""><img src="/images/5.jpg" alt=""></a>
                            </div>
                        </div>
                    </div>
                    <div class="pagination"></div>
                </div>
                <section class="row lines_main" >
                    <section class="small-4 columns">
                        <section class="cocie">
                            <img src="/images/music/syj.png">
                        </section>
                        <p>私人FM</p>
                    </section>
                    <section class="small-4 columns">
                        <section class="cocie">31</section>
                        <p>每日歌曲推荐</p>
                    </section>
                    <section class="small-4 columns">
                        <section class="cocie">
                            <img src="/images/music/pb.png" >
                        </section>
                        <p>云音乐新歌榜</p>
                    </section>
                </section>
                <section class="row line_g">
                    <section class="tjgd"><span>推荐歌单</span><label>更多</label></section>
                    <section class="container listdata">
                        <ul class=" row ">
                            <li class="small-4 columns">
                                <a href=""><img src="/images/music/p1.jpg" alt="">
                                    <div class="num"><span></span>51万</div>
                                </a>
                                <p>每个姑娘都有一颗少女心</p>
                            </li>
                            <li class="small-4 columns">
                                <a href=""><img src="/images/music/p2.jpg" alt="">
                                    <div class="num "><span></span>51万</div>
                                </a>
                                <p>「粤语」简单情歌，深情粤语</p>
                            </li>
                            <li class="small-4 columns">
                                <a href=""><img src="/images/music/p3.jpg" alt="">
                                    <div class="num"><span></span>21万</div>
                                </a>
                                <p>【英語】减肥动力之歌</p>
                            </li>

                        </ul>
                        <ul class=" row ">
                            <li class="small-4 columns">
                                <a href=""><img src="/images/music/p4.jpg" alt="">
                                    <div class="num"><span></span>61万</div>
                                </a>
                                <p>街头极限健身 Street Workout BGM</p>
                            </li>
                            <li class="small-4 columns">

                                <a href=""><img src="/images/music/p5.jpg" alt="">
                                    <div class="num "><span></span>511万</div>
                                </a>
                                <p>日出之前</p>
                            </li>
                            <li class="small-4 columns">
                                <a href=""><img src="/images/music/p6.jpg" alt="">
                                    <div class="num "><span></span>21万</div>
                                </a>
                                <p>历届奥运主题歌回顾</p>
                            </li>
                        </ul>
                    </section>
                </section>
            </div>
        </div>
    </div>
    <!-- list -->
    <section class="container" ng-class="{show: playShow}">
        <section class="row">
            <ul class="tab tablist"  ng-repeat=" x in songs">
                <li class="small-12 columns" ng-click="searchSongUrl(x.id)">
                    <a href="javascript:void(0)">{{x.name}}</a>
                    <span>{{x.artists[0].name}}</span>
                </li>
            </ul>
        </section>
    </section>
    <!-- footer -->
    <section class="footer">
        <ul class="row">
            <li class="small-3 columns">
                <img src="/images/music/mm.png" alt="">
                发现推荐
            </li>
            <li class="small-3 columns">
                <img src="/images/music/fm.png" alt="">
                我的音乐
            </li>
            <li class="small-3 columns">
                <img src="/images/music/f.png" alt="">
                朋友
            </li>
            <li class="small-3 columns">
                <img src="/images/music/u.png" alt="">
                账号
            </li>
        </ul>
    </section>

   <!-- <iframe  src="play" ng-class="{show: playShow}"></iframe>-->
</div>

</body>
<script>
    var container = angular.module('song', []);
    container.controller('song', function ($scope, $http, $sce, $window) {
        $scope.songs = [];//歌曲列表

        /* 搜素功能 */
        $scope.searchSongId = function(){
            $http({
                method: "POST",
                url: "/search",
                data:{'searchName':$scope.searchName}
            }).
            success(function(data, status) {
                $scope.playShow = true;
                $scope.playHide = true;
                $scope.songs = data.result.songs;
                localStorage.setItem('songs',JSON.stringify(data.result.songs));
            }).
            error(function(data, status) {
                debugger
            })
        };
        /* 搜索歌曲地址 */
        $scope.searchSongUrl = function (songId) {
            $http({
                method: "POST",
                url: "/searchUrl",
                data:{'songId': songId}
            }).
            success(function(data, status) {
                localStorage.setItem('songsMessage',JSON.stringify(data.songs[0]));
                $scope.playMusic($scope.songUrl);

            }).
            error(function(data, status) {
                debugger
            })
        };
        /* 播放 */
        $scope.playMusic = function (url) {
          $window.location = "play"
        };
    });
</script>
<script>
    var mySwiper = new Swiper('.banner-container',{
        pagination: '.pagination',
        paginationClickable: true,
        loop:true,
    })
</script>
</html>